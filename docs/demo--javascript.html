<!DOCTYPE html>

<html>
<head>
  <title>Testing with Javascript</title>
  <link href="search/tipuesearch.css" rel="stylesheet">
  <link href="style.css" rel="stylesheet">
</head>

<body class="page--plugin_javascript">
<header>
  <div class="pager"><a href="demo--header.html" class="prev demo--header">&laquo;Testing Response Headers</a><a href="index.html" class="index pager__book-title">Check Pages</a><a href="demo--path.html" class="next plugin_path">The Path Plugin is for Testing Structured Content&raquo;</a></div></header>
<section class="sub-header">
  <div class="breadcrumbs"><a href="index.html">Index</a>
         &raquo
                        <a href="demo--javascript2.html">Usage and Examples</a>
         &raquo
      </div>      <div class="search__wrapper">
  <form action="search--results.html">
    <input type="text" class="search-input" name="q" id="tipue_search_input" autocomplete="off" required>
  </form>
</div>
  </section>

<section>
  <h1>Testing with Javascript</h1>
  

<p>You can use javascript in your tests to capture things like the window location or query string. The test is run inside of Chrome devtools so the full javascript console is available.</p>

<h2>Extract an ID from an URL and Reuse it</h2>

<pre><code class="yaml">-
  visit: /node/25029
  find:
    -
      javascript: location.pathname.split('/')[2]
      set: nid

-
  visit: /print/node/{nid}
</code></pre>

<h2>Assert the URL Hash Matches RegEx Pattern</h2>

<pre><code class="yaml">-
  visit: /
  find:
    -
      javascript: location.hash
      matches: /^#foo=bar&amp;alpha=bravo$/
</code></pre>

<h2>Example Tests</h2>

<pre><code class="yaml">-
  why: Assert javascript is run after the redirect.
  visit: /test_subject.php?redirect
  expect: 302
  find:
    -
      javascript: location.search
      is: ?redirected

-
  visit: /test_subject.php
  js: true
  find:
    -
      why: Test we can eval JS without asserting anything.
      javascript: document.querySelector('body').classList.add('foo')
    -
      why: This content is generated by JS in test_subject.php.  It will only be there if the test is run with JS turned on.
      dom: h1
      text: COVID 19 Pandemic
    -
      why: Assert we can set the results of a javascript evaluation.
      javascript: location.pathname
      set: path

-
  why: This example shows how to check the window location hash by using the javascript selector.  It also checks that js is set to true automatically.
  visit: /test_subject.php
  find:
    -
      javascript: location.hash
      matches: /^#foo=bar&amp;alpha=bravo$/
    -
      javascript: location.hash
      is: '#foo=bar&amp;alpha=bravo'
    -
      javascript: location.hash
      is not: '#foo=bar&amp;alpha=bravo&amp;charlie=delta'
    -
      javascript: location.query
      is: ""

</code></pre>

<p><em>Provided by the javascript plugin.</em></p>

</section>

<div class="search__results">
  <div id="tipue_search_content"></div>
</div>

<footer>
  <div class="pager"><a href="demo--header.html" class="prev demo--header">&laquo;Testing Response Headers</a><a href="index.html" class="index pager__book-title">Check Pages</a><a href="demo--path.html" class="next plugin_path">The Path Plugin is for Testing Structured Content&raquo;</a></div>  
  <div id="footer-legaleeze">
    <p class="legaleeze center">Version: 0.15.2 &bull; Last Updated: Sun, 17 Apr 2022 00:06:18 -0700</p>
  </div>
</footer>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script src="search/tipuesearch_content.js"></script>
  <script src="search/tipuesearch_set.js"></script>
  <script src="search/tipuesearch.min.js"></script>
  <script>
    $(document).ready(function() {
      $('#tipue_search_input').tipuesearch()
    })
  </script>
<script src="js/core.js"></script>
</body>
</html>
